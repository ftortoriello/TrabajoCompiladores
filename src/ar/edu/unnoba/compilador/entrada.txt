(* Ejemplo de un programa completo dado en la consigna de la etapa 1 *)

(* Se definen (* algunas *) variables globales *)
variable radio is float;
variable superficie₁ is float = 0;

(* Pruebas constant folding (borrar después) *)

variable x1 is integer = 2 + x1 + 2.1 + 0.9; # ver esta, no reduce pero debería poderse
variable x2 is float = 5 - -2;
variable x3 is integer = 3 * 3 * x1;
variable x4 is float = 10.0 / 4;
variable x5 is float = 12 / 1.5;
variable x6 is boolean = 6.2 != 7;
variable x7 is boolean = true or false or false;
variable x8 is boolean = true and true or false or false;
variable x9 is boolean = 2 != 2.0; # esto debería ser true o false? es true ahora
variable x10 is boolean = 2 == 2;
variable x11 is boolean = 2 > 2;
variable x12 is boolean = 2 >= 2;
variable x13 is boolean = 2 < 2;
variable x14 is boolean = 2 <= 2;
variable x15 is integer = - 0.0;
variable x16 is float = - (- 1);
variable x17 is boolean = not true;
variable x18 is boolean = not (false or false);

{ Una función }
function superficie_círculo(x is float) return float
begin
    writeln("Dentro de función superficie_círculo()");
    # Definición de una variable local.
    if radio < 0 then
        return 0
    else begin
        variable radio² is float = cuadrado(radio);
        return 3.14 * radio²;
    end;
end;

(* Otra función pero con una única sentencia *)
function cuadrado(valor is float) return float
    return valor * valor;

{ Otra variable global (esta vez, sin inicialización explícita) }
variable superficie₂ is float;

# Procedimiento principal
main is
    writeln("Inicio del programa");
    writeln(superficie₁);
    writeln(superficie₂);
    superficie₁ = superficie_círculo(radio);
    writeln(superficie₁);

    radio = read_float();
    superficie₂ = superficie_círculo(radio);
    writeln(superficie₂);

    variable justo is boolean = false;
    when superficie_círculo(radio)
        is < 100 then writeln("Es pequeño")
        is == 100 then begin
            writeln("Qué puntería!");
            justo = true;
        end
        else writeln("Es grande");

    write("Acertó: "); writeln(justo);

    variable i is integer;
    for i from 5 to 1 do begin
        write("Se acaba en "); writeln(i);
    end;

    writeln("Se acabó\n\nFin!");
end.

{
(* Ejemplo de ámbitos dado en la consigna de la etapa 2 *)

function ejemplo() return boolean
begin
    variable local_a_ejemplo is boolean = true;
    if global > 10 then
    begin
        variable local_al_then is float = global;
        while local_al_then > 5 do
        begin
            local_al_then = local_al_then - 1;
            variable local_al_while is float = local_al_then * 1.5;
            writeln(local_al_while);
        end;
        writeln(local_al_then);
        #local_al_main = false;  # error, está fuera del alcance
    end else
        global = global + 5;
    #writeln(local_al_main);     # error, está fuera del alcance
    return local_a_ejemplo;
end;

variable global is integer = 42;

main is
    variable local_al_main is boolean = true;

    if not local_al_main then
        variable local_al_then is integer = 1
    else
        ejemplo();
end.

{
{ prueba }
main is
end.
}
